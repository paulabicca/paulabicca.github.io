<!doctype html><html lang=en dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="Learn how the lifecycle of a React component relates to the use of the useEffect and useLayoutEffect hooks to create more efficient and well-structured applications."><title>Mastering the Lifecycle in React with useEffect and useLayoutEffect</title>
<link rel=canonical href=https://paulabicca.github.io/en/p/mastering-the-lifecycle-in-react-with-useeffect-and-uselayouteffect/><link rel=stylesheet href=/scss/style.min.663803bebe609202d5b39d848f2d7c2dc8b598a2d879efa079fa88893d29c49c.css><meta property='og:title' content="Mastering the Lifecycle in React with useEffect and useLayoutEffect"><meta property='og:description' content="Learn how the lifecycle of a React component relates to the use of the useEffect and useLayoutEffect hooks to create more efficient and well-structured applications."><meta property='og:url' content='https://paulabicca.github.io/en/p/mastering-the-lifecycle-in-react-with-useeffect-and-uselayouteffect/'><meta property='og:site_name' content='Paula Bicca'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='Hooks'><meta property='article:tag' content='lifecycle'><meta property='article:tag' content='ReactJS'><meta property='article:tag' content='frontend'><meta property='article:tag' content='useEffect'><meta property='article:tag' content='useLayoutEffect'><meta property='article:published_time' content='2024-11-20T00:00:00+00:00'><meta property='article:modified_time' content='2024-11-20T00:00:00+00:00'><meta name=twitter:title content="Mastering the Lifecycle in React with useEffect and useLayoutEffect"><meta name=twitter:description content="Learn how the lifecycle of a React component relates to the use of the useEffect and useLayoutEffect hooks to create more efficient and well-structured applications."><link rel="shortcut icon" href=/favicon.png></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/en/><img src=/img/avatar_hu15431975163954554691.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>✨</span></figure><div class=site-meta><h1 class=site-name><a href=/en>Paula Bicca</a></h1><h2 class=site-description>Desenvolvedora Front-End que ama novidades, reflexões e acessibilidade.</h2></div></header><ol class=menu-social><li><a href=mailto:paula.bicca@gmail.com target=_blank title=Email rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-mail"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 7a2 2 0 012-2h14a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2V7z"/><path d="M3 7l9 6 9-6"/></svg></a></li><li><a href=https://github.com/paulabicca target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://www.linkedin.com/in/paulabicca93/ target=_blank title=LinkedIn rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-linkedin"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 11v5"/><path d="M8 8v.01"/><path d="M12 16v-5"/><path d="M16 16v-3a2 2 0 10-4 0"/><path d="M3 7a4 4 0 014-4h10a4 4 0 014 4v10a4 4 0 01-4 4H7a4 4 0 01-4-4z"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/en/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/en/about-me/><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-user"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 7a4 4 0 108 0A4 4 0 008 7"/><path d="M6 21v-2a4 4 0 014-4h4a4 4 0 014 4v2"/></svg>
<span>About Me</span></a></li><li><a href=/en/articles/><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-article"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 4m0 2a2 2 0 012-2h14a2 2 0 012 2v12a2 2 0 01-2 2H5a2 2 0 01-2-2z"/><path d="M7 8h10"/><path d="M7 12h10"/><path d="M7 16h10"/></svg>
<span>Articles</span></a></li><li><a href=/en/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li class=menu-bottom-section><ol class=menu><li id=i18n-switch><svg class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg>
<select name=language title=language onchange="window.location.href=this.selectedOptions[0].value"><option value=https://paulabicca.github.io/pt-br/>Português</option><option value=https://paulabicca.github.io/en/ selected>English</option></select></li><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#first-what-is-useeffect><strong>First, what is useEffect?</strong></a></li><li><a href=#so-what-is-the-lifecycle-in-react><strong>So, what is the lifecycle in React?</strong></a></li><li><a href=#mounting><strong>Mounting</strong></a></li><li><a href=#updating><strong>Updating</strong></a></li><li><a href=#unmounting><strong>Unmounting</strong></a></li><li><a href=#so-uselayouteffect><strong>So, useLayoutEffect</strong></a></li><li><a href=#common-pitfalls-and-best-practices><strong>Common Pitfalls and Best Practices</strong></a></li><li><a href=#final-thoughts-and-next-steps><strong>Final Thoughts and Next Steps</strong></a></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/en/categories/reactjs/>ReactJS
</a><a href=/en/categories/programming/>Programming
</a><a href=/en/categories/front-end/>Front-End</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/en/p/mastering-the-lifecycle-in-react-with-useeffect-and-uselayouteffect/>Mastering the Lifecycle in React with useEffect and useLayoutEffect</a></h2><h3 class=article-subtitle>Learn how the lifecycle of a React component relates to the use of the useEffect and useLayoutEffect hooks to create more efficient and well-structured applications.</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>Nov 20, 2024</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>6 minute read</time></div></footer><footer class=article-translations><svg class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M4 5h7"/><path d="M9 3v2c0 4.418-2.239 8-5 8"/><path d="M5 9c-.003 2.144 2.952 3.908 6.7 4"/><path d="M12 20l4-9 4 9"/><path d="M19.1 18h-6.2"/></svg><div><a href=https://paulabicca.github.io/pt-br/p/dominando-ciclo-de-vida-no-react-com-useeffect-e-uselayouteffect/ class=link>Português</a></div></footer></div></header><section class=article-content><p>The first things I learned with React were about Hooks, especially <code>useState</code> and <code>useEffect</code>. However, in the beginning, I used them without fully understanding how I should, which led to some issues – especially with <code>useEffect</code>. For example, I once forgot to add dependencies in <code>useEffect</code>, which resulted in an infinite loop.</p><p>Back then, no one explained how to avoid these mistakes, so today I want to share some tips on how to use <code>useEffect</code> correctly, especially in the context of the component lifecycle.</p><p>In this article, we will explore how <code>useEffect</code> (and, in some cases, <code>useLayoutEffect</code>) can be used to handle the stages of a component&rsquo;s lifecycle in React: mounting, updating, and unmounting.</p><hr><h2 id=first-what-is-useeffect><strong>First, what is useEffect?</strong></h2><p><code>useEffect</code> is one of React&rsquo;s hooks, and its main function is to handle side effects in functional components.
But you might be wondering: What are side effects? Let me explain!
Side effects are operations that are not directly related to the rendering process of the component, but are still necessary. Common examples include API calls, manual DOM updates, or even cleanup tasks like canceling requests.</p><p><strong>How does useEffect work?</strong><br>It takes two main parameters:</p><ul><li>A function that contains the code to be executed when the component is mounted, updated, or unmounted.</li><li>An optional dependency array that defines when the effect should be executed.</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=nx>useEffect</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s2>&#34;The effect has been executed!&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>});</span>
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=so-what-is-the-lifecycle-in-react><strong>So, what is the lifecycle in React?</strong></h2><p>The lifecycle describes the phases a React component goes through, from its creation to its removal from the DOM. These phases can be divided into three main stages:</p><ol><li><strong>Mounting</strong>: When the component is added to the screen.</li><li><strong>Updating</strong>: When something in the component changes, such as state or props.</li><li><strong>Unmounting</strong>: When the component is removed from the DOM.</li></ol><hr><h2 id=mounting><strong>Mounting</strong></h2><p>The mounting stage occurs when the component is added to the page for the first time. Before the introduction of hooks, we used the <code>componentDidMount</code> lifecycle method to execute code right after the component was inserted into the DOM.</p><p>With the arrival of <code>useEffect</code>, you can simply pass an empty dependency array to simulate this behavior. The code will be executed only once, after the component is mounted.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kr>import</span> <span class=nx>React</span><span class=p>,</span> <span class=p>{</span> <span class=nx>useEffect</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;react&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>function</span> <span class=nx>MyComponent</span><span class=p>()</span> <span class=p>{</span>  
</span></span><span class=line><span class=cl>  <span class=nx>useEffect</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>  
</span></span><span class=line><span class=cl>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Component mounted!&#39;</span><span class=p>);</span>  
</span></span><span class=line><span class=cl>    <span class=c1>// Here you can make requests or set up events.
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=p>},</span> <span class=p>[]);</span>  <span class=c1>// No dependencies, executes only on mount.
</span></span></span><span class=line><span class=cl><span class=c1></span>  <span class=k>return</span> <span class=p>&lt;</span><span class=nt>div</span><span class=p>&gt;</span><span class=nx>Hello</span> <span class=nx>World</span><span class=p>&lt;/</span><span class=nt>div</span><span class=p>&gt;;</span>  
</span></span><span class=line><span class=cl><span class=p>}</span>  
</span></span></code></pre></td></tr></table></div></div><h2 id=updating><strong>Updating</strong></h2><p>A component is updated whenever there is a change in its state (<code>state</code>) or props (<code>props</code>). Before hooks, we used methods like <code>componentDidUpdate</code> to handle this phase. Today, <code>useEffect</code> allows us to monitor changes in specific variables, thanks to the dependency array.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kr>import</span> <span class=nx>React</span><span class=p>,</span> <span class=p>{</span> <span class=nx>useEffect</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;react&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>useEffect</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>  
</span></span><span class=line><span class=cl>  <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Component updated!&#39;</span><span class=p>);</span>  
</span></span><span class=line><span class=cl><span class=p>},</span> <span class=p>[</span><span class=nx>data</span><span class=p>]);</span> <span class=c1>// The useEffect will run every time &#34;data&#34; changes.
</span></span></span></code></pre></td></tr></table></div></div><ul><li>If we don&rsquo;t pass a dependency array, <code>useEffect</code> will execute on every update, which can lead to undesirable behavior.</li></ul><h2 id=unmounting><strong>Unmounting</strong></h2><p>The unmounting stage occurs when the component is removed from the DOM. Previously, we used the componentWillUnmount method to perform cleanup tasks, such as removing event listeners or canceling requests.</p><p>Now, we use <code>useEffect</code> with a return statement inside the function, which is automatically executed during unmounting.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kr>import</span> <span class=nx>React</span><span class=p>,</span> <span class=p>{</span> <span class=nx>useEffect</span> <span class=p>}</span> <span class=nx>from</span> <span class=s1>&#39;react&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>useEffect</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=p>{</span>  
</span></span><span class=line><span class=cl>  <span class=kr>const</span> <span class=nx>timer</span> <span class=o>=</span> <span class=nx>setInterval</span><span class=p>(()</span> <span class=p>=&gt;</span> <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Executando...&#39;</span><span class=p>),</span> <span class=mi>1000</span><span class=p>);</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> <span class=p>()</span> <span class=p>=&gt;</span> <span class=p>{</span>  
</span></span><span class=line><span class=cl>    <span class=nx>clearInterval</span><span class=p>(</span><span class=nx>timer</span><span class=p>);</span>   <span class=c1>// Cleanup performed when the component unmounts
</span></span></span><span class=line><span class=cl><span class=c1></span>    <span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=s1>&#39;Component unmounted!&#39;</span><span class=p>);</span>  
</span></span><span class=line><span class=cl>  <span class=p>};</span>  
</span></span><span class=line><span class=cl><span class=p>},</span> <span class=p>[]);</span>  
</span></span></code></pre></td></tr></table></div></div><hr><h2 id=so-uselayouteffect><strong>So, useLayoutEffect</strong></h2><p>As soon as you open the React documentation, you’ll see this warning:</p><p><img src=/en/p/mastering-the-lifecycle-in-react-with-useeffect-and-uselayouteffect/imgs/warning-img.png width=967 height=188 srcset="/en/p/mastering-the-lifecycle-in-react-with-useeffect-and-uselayouteffect/imgs/warning-img_hu8577468520204877599.png 480w, /en/p/mastering-the-lifecycle-in-react-with-useeffect-and-uselayouteffect/imgs/warning-img_hu937473452895861307.png 1024w" loading=lazy alt="An image showing a warning about the use of useLayoutEffect, alerting that excessive use may harm the applications performance." class=gallery-image data-flex-grow=514 data-flex-basis=1234px></p><p>In other words, use it with caution. With that in mind, let&rsquo;s explore what <code>useLayoutEffect</code> is!!</p><p><code>useLayoutEffect</code> is a React hook similar to <code>useEffect</code>, even in how it is declared. However, there are important differences in when the code is executed. It is used to run synchronous effects before the browser performs the screen painting. This means any changes made to the DOM within <code>useLayoutEffect</code> will be applied immediately, ensuring the user sees the updates before the next visual frame.</p><p><strong>When should you use it?</strong></p><ul><li><strong>Measuring or modifying the DOM layout</strong>: For example, calculating the size or position of an element before the browser renders the page.</li><li><strong>Synchronizing states or styles directly with changes in the DOM</strong>: Especially when updates rely on precise measurements.</li></ul><p><strong>And within the Lifecycle? Where does it fit?</strong><br>Within the React lifecycle, <code>useLayoutEffect</code> primarily fits into the mounting and updating phases. It makes the most sense in these stages if you need to ensure that changes to the DOM are applied before the screen is painted. Below, you&rsquo;ll find a more detailed explanation of its use during these phases.</p><p><strong>1. Mounting:</strong></p><ul><li>When the component is mounted, <code>useLayoutEffect</code> is executed after rendering but before the screen is painted. This is useful when you need to adjust the layout or measure DOM elements (such as sizes or positions) before the user sees any changes.</li></ul><p><strong>2. Updating:</strong></p><ul><li>During component updates (when state or props change), <code>useLayoutEffect</code> is also called after rendering but before the screen is painted. If you need to perform actions on the DOM (like recalculating an element&rsquo;s size or updating a style) based on state changes, <code>useLayoutEffect</code> ensures the layout is adjusted before the screen is re-rendered.</li></ul><hr><h2 id=common-pitfalls-and-best-practices><strong>Common Pitfalls and Best Practices</strong></h2><ol><li><p><strong>Avoid effects without dependencies</strong>: A useEffect without dependencies will run on every update, which can lead to infinite loops or performance degradation.</p></li><li><p><strong>Remember cleanup on unmount</strong>: Always return a cleanup function from useEffect to avoid unexpected behavior, such as intervals or event listeners not being removed.</p></li><li><p><strong>Use the dependency array correctly</strong>: Ensure that all variables used within useEffect are listed as dependencies. ESLint can help with this.</p></li><li><p><strong>Excessive or unnecessary use</strong>: useLayoutEffect is heavier than useEffect, as it runs synchronously after all DOM mutations. This can impact performance, especially in components with many renders. Use it only when truly necessary.</p></li><li><p><strong>Prioritize useEffect whenever possible</strong>: I might be repeating myself, but it’s important, I promise! Most of the time, useEffect is the ideal choice for most asynchronous operations. Use useLayoutEffect only when you need to interact with the DOM layout synchronously.</p></li></ol><hr><h2 id=final-thoughts-and-next-steps><strong>Final Thoughts and Next Steps</strong></h2><p>Understanding the lifecycle of a React component is essential, both to know what you&rsquo;re doing and to create robust and efficient applications. The <code>UseEffect</code> and <code>useLayoutEffect</code> hooks are great allies in this process, but it&rsquo;s important to know when to use each and avoid common pitfalls. By following best practices, you ensure that your components are well-structured and easy to maintain. And if you&rsquo;re ever unsure about something, your best friend will always be the documentation.</p><p>Learn more about React: <a class=link href=https://react.dev/ target=_blank rel=noopener>https://react.dev/</a></p><p><strong>How about you, do you have any tips or questions about the lifecycle? About <code>UseEffect</code> or <code>useLayoutEffect</code>? Leave a comment and let&rsquo;s exchange ideas!</strong></p></section><footer class=article-footer><section class=article-tags><a href=/en/tags/hooks/>Hooks</a>
<a href=/en/tags/lifecycle/>Lifecycle</a>
<a href=/en/tags/reactjs/>ReactJS</a>
<a href=/en/tags/frontend/>Frontend</a>
<a href=/en/tags/useeffect/>UseEffect</a>
<a href=/en/tags/uselayouteffect/>UseLayoutEffect</a></section><section class=article-lastmod><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<span>Last updated on Nov 20, 2024</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/en/p/is-vanilla-javascript-dead/><div class=article-details><h2 class=article-title>Is Vanilla JavaScript Dead?</h2></div></a></article><article><a href=/en/p/have-you-heard-of-hoisting/><div class=article-details><h2 class=article-title>Have You Heard of Hoisting?</h2></div></a></article><article><a href=/en/p/why-you-should-start-using-prefers-reduced-motion/><div class=article-details><h2 class=article-title>Why You Should Start Using prefers-reduced-motion</h2></div></a></article><article><a href=/en/p/wai-aria-semantic-html-partners-in-accessibility/><div class=article-details><h2 class=article-title>WAI-ARIA & semantic HTML: Partners in Accessibility</h2></div></a></article><article><a href=/en/p/how-cherry-pick-can-save-you/><div class=article-details><h2 class=article-title>How Cherry-pick can save you</h2></div></a></article></div></div></aside><script src=https://utteranc.es/client.js repo=paulabicca/paulabicca.github.io issue-term=pathname label=Comentários crossorigin=anonymous async></script><style>.utterances{max-width:unset}</style><script>let utterancesLoaded=!1;function setUtterancesTheme(e){let t=document.querySelector(".utterances iframe");t&&t.contentWindow.postMessage({type:"set-theme",theme:`github-${e}`},"https://utteranc.es")}addEventListener("message",e=>{if(e.origin!=="https://utteranc.es")return;utterancesLoaded=!0,setUtterancesTheme(document.documentElement.dataset.scheme)}),window.addEventListener("onColorSchemeChange",e=>{if(!utterancesLoaded)return;setUtterancesTheme(e.detail)})</script><footer class=site-footer><section class=copyright>&copy;
2024 -
2025 Paula Bicca</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.30.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>